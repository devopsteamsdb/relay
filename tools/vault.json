{
    "name": "Vault",
    "description": "HashiCorp Vault â€“ secrets management and encryption",
    "download_steps": [
        {
            "type": "shell",
            "package_manager": "dnf",
            "command": "yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo"
        },
        {
            "type": "shell",
            "package_manager": "dnf",
            "command": "dnf install -y --downloadonly --downloaddir={download_dir} vault"
        },
        {
            "type": "shell",
            "package_manager": "apt",
            "command": "wget -O- https://apt.releases.hashicorp.com/gpg | gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg"
        },
        {
            "type": "shell",
            "package_manager": "apt",
            "command": "echo \"deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main\" | tee /etc/apt/sources.list.d/hashicorp.list"
        },
        {
            "type": "shell",
            "package_manager": "apt",
            "command": "apt-get update && apt-get install -y --download-only -o Dir::Cache::archives={download_dir} vault"
        }
    ],
    "install_steps": [
        {
            "type": "shell",
            "package_manager": "dnf",
            "command": "dnf install -y {download_dir}/vault*.rpm"
        },
        {
            "type": "shell",
            "package_manager": "apt",
            "command": "dpkg -i {download_dir}/vault*.deb || apt-get install -f -y"
        }
    ],
    "idempotency_check": "vault --version"
}